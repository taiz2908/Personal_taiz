 ============: Major AWS Services: =======
 - EC2 (Elastic Cloud Compute)
  Types:
   - General Purpose 
   - Compute Optimized 
   - Memory Optimized (larger RAM size)
   - Accelerated Computing (larger data sizes with read & write access)
   - Storage Optimized ()
  Purchasing Options:
   - On-demand Instances: shorterm irregular workload that can't be interrupted. 
   - Spot Instances
   - Dedicated Hosts
   - Dedicated Instances
   - Standard Reserved Instances: min 1year
  Instance States:
   - Stop
   - start
   - Terminate
   - Hybernate
   - Standby

 - AMI
   - OS Image + App Image
   - Avaialble in AWS, Marketplace, Custom AMI

 - IAM
   - Users: User can belong to multiple groups. (attach the polocies to the users). "IAMuserChangepassword"
   - Groups : Groups are collections of "users" and have "policies" attached to them.
   - IAM User has limited permission to the account.
   - Policies: Policies are JSON documents that outline permissions for users, groups or roles
     1. User based policies
       - IAM policies define which API calls should be allowed for a specific user.
     2. Resource based policies
       - Control access to an AWS resource.
   - Roles: Collection of policies for AWS services.

 - EBS
   - Bound to an AZ
   - By default, upon instance termination, the root EBS volume is deleted and any other attached EBS volume is not deleted.
   - To replicate an EBS volume across AZ or region, need to copy its snapshot.
   - EBS Multi-attach allows the same EBS volume to attach to multiple EC2 instances in the same AZ
  Types:
   1. General Purpose SSD : Good for system boot volumes, virtual desktop
   2. Provisioned IOPS SSD :Transaction-intensive Applications with high frequency of small & random IO operations. 
   3. Cold (HDD) :Throughput-intensive Applications that require large & sequential IO operations and are less sensitive to increased I/O latency 
   4. Throughput optimised HDD
   5. Magentic(standard)
  Snapshots:
   - Data Lifecycle Manager (DLM) can be used to automate the creation, retention, and deletion of snapshots of EBS volumes.
   - Snapshots are incremental.
   - Only the most recent snapshot is required to restore the volume.

 - S3
   - Global Service
   - Object store (key-value pairs)
   - Buckets must have a globally unique name
   - Buckets are defined at the regional level
   - Max Object Size: 5TB
  Bucket Versioning:
   - Enabled at the bucket level
   - Protects against unintended deletes
   - Ability to restore to a previous version
  Storage Classes:
   1. S3 Standard
   2. S3 Standard Infrequent Access
   3. S3 One zone IA
   4. S3 Intelligent Tiering
   5. S3 Glacier
   6. S3 Glacier deep archieve
  Data Transfer Costs:
   - Uploads to S3 are free
   - Downloads from S3 are paid

 - CloudWatch
   - Serverless performance monitoring service
   - EC2 instances have metrics every 5 minutes
   - With detailed monitoring (for a cost), you get metrics every 1 minute
   - Use detailed monitoring if you want to react faster to changes (eg. scale faster for your ASG)
  Available metrics in CloudWatch:
   - CPU Utilization
   - Network Utilization
   - Disk Performance
   - Disk Reads/Writes
  Custom metrics:
   - Memory utilization (memory usage)
   - Disk swap utilization
   - Disk space utilization
   - Page file utilization
  Logs:
   - Used to store application logs
   - Log Groups represent an application sending logs to CW
   - Log Streams represent instances within applications or log files or containers
   - Logs Expiration: never expire (default), 30 days, etc.
  Logs can be sent to:
   - S3 buckets (exports)
   - Kinesis Data Streams
   - Kinesis Data Firehose
   - Lambda functions
   - ElasticSearch

 - Lambda
   - Serverless (short actions/functionality)
   - we can directly run the application. 

 - Auto Scaling
   - Regional Service
   - Supports Multi AZ
   - Automatically add(scale out) or, remove(scale in) instances (scale horizontally) based on the load.
   - Free (pay for the underlying resources)
   - IAM roles attached to an ASG will get assigned to the launched EC2 instances
   - ASG can terminate instances marked as unhealthy by an ELB.
  Components:
   - Scaling policy: min & max number of instances.
   - metric type: we can define cpu utilisation %
   - target groups

 - ELB 
   1. Network LB 
     - Operates at Layer 4 (TCP, UDP)
     - Can handle millions of request per seconds (extreme performance)
     - Lower latency ~ 100 ms (vs 400 ms for ALB)
     - 1 static public IP per AZ (vs a static hostname for CLB & ALB)
     - Elastic IP can be assigned to NLB
   2. Application LB
     - Load balancing to multiple applications (target groups) based on the request parameters
     - Operates at Layer 7 (HTTP, HTTPS and WebSocket)
     - Provides a fixed hostname (xxx.region.elb.amazonaws.com)
     - ALB terminates the upstream connection and creates a new downstream connection to the targets (TCP termination)
     - Security Groups can be attached to ALBs to filters requests
     - Great for micro services & container-based applications (Docker & ECS)
   3. Gateway LB
     - Operates at layer 3 (Network layer) - IP Protocol
     - Used to route requests to a fleet of 3rd party virtual appliances like Firewalls, Intrusion Detection and Prevention Systems (IDPS), etc.
     - Performs two functions:
       - Transparent Network Gateway (single entry/exit for all traffic)
       - Load Balancer (distributes traffic to virtual appliances)
  Cross-zone Load Balancing:

 - VPC
   - Customize our n/w configuration, n/w that is isolated from other n/w.
   - Max 5 vpc can be created in one region, 200 subnets in 1 vpc.
   - VPC confined to region.
   - Subnet confined to subnet.
  Types:
   - default (has IG)
   - custom (Doesn't have IG, need to create)
  How to Create? 
   - Create VPC
   - Create subnet
   - Create Route table
   - Create Internet Gateway   
  Public vs Private Subnet:
   - Major diff is IG
   - In public traffic is routed to an IG
   - In private traffic doesn't route to IG
  NAT Gateway:
   - By using Nat gateway we can access aws services
   - To create nat gateway must specify the public subnet.
   - Must specify elastic ip.
   - Mask the IP address. 
   - Help to download the package from the internet.
  VPC Peering:
   - Its a n/w connection between two vpc that enables us to route traffic between them.
   - using IPV4 address or IPV6 address.
  VPC Endpoint:
   - Enables us to privately connect your vpc to support aws services.
   - Instances don't require public ip address.
  Flow:
   - User hit the app-->IG-->Public Subent-->ELB(target group)-->Route Table-->Private Subnet-->Securty Groups-->EC2

 - Route 53
   - Global Service
   - AWS managed Authoritative DNS (customer can update the DNS records and have full control over the DNS)
   - Also a Domain Registrar (for registering domain names)
  Record Types:
   - A - maps a hostname to IPv4
   - AAAA - maps a hostname to IPv6
   - CNAME - maps a hostname to another hostname
   - NS (Name Servers) - controls how traffic is routed for a domain
   - Alias - maps a hostname to an AWS resource

 - DynamoDB

 - SNS

 - SQS

 - ECS (Elastic Container Service)
   - AWS managed container orchestration platform. / AWS proprietary service

 - EKS
   - Managed k8s service. 
   - https://docs.aws.amazon.com/eks/latest/userguide/getting-started-console.html

 - ECR (Elastic Container Registry)
   - AWS managed private Docker repository
   - Pay for the storage you use to store docker images (no provisioning)
   - Integrated with ECS & IAM for security
   - Storage backed by S3
   - Can upload Docker images on ECR manually or we can use a CICD service like CodeBuild

 - Fargate

 - Cloudformations(CFT)
   - Create stack
   - If template is present then need to choose "template is ready"
   - Template source [S3, Upload a template file]
  - Next --> Done

 - KMS

 - CloudTrail
 - 

Ref:
 - https://boto3.amazonaws.com/v1/documentation/api/latest/index.html

==============: AWS CLI :=============
- Version : Version 2
# aws version - to check properly installed or not
# aws configure
 - AWS access key ID
 - AWS Secrete key ID
# aws s3 ls
# aws s3 mb <bucket_name> - create bucket
# aws s3 rb - Delete buckets
# aws s3 rm - Delete objects
# aws s3 mv <source> <target> - Move objects
# aws s3 cp <source> <target> - copy objects

====================: AWS INTERVIEW QUS :=========================================================

1. Security Group vs NACL.
   Security Group
    - Operates instance level
    - allow rules only
    - stateful
   NACL
    - Operates subnet level.
    - we can allow as well deny rules.
    - stateless.

2. Single part vs multipart upload mechanism in S3 bucket .
 - Multipart Upload:
    - Multi-part Upload
    - parallelizes upload
    - recommended for files > 100MB (when your object size reaches 100 MB, you should consider using multipart uploads instead of uploading the object in a single operation.)
    - must use for files > 5GB
    
3. S3 lifecycle policy.
 - To manage your objects so that they are stored cost effectively throughout their lifecycle, 
 - An S3 Lifecycle configuration is a set of rules that define actions(XML) that Amazon S3 applies to a group of objects. There are two types of actions:
 - Transition actions & Expiration actions 

4. EKS Cluster.

5. Application load balancer vs Network Load balancer
  - Load balancing to multiple applications (target groups) based on the request parameters.
  - Distributes incoming traffic accross multiple targets such as EC2 in multiple AZ.
  - Operates at Layer 7 (HTTP, HTTPS and WebSocket)
---
  - Operates at Layer 4 (TCP, UDP)
  - Can handle millions of request per seconds (extreme performance)
  - Lower latency ~ 100 ms (vs 400 ms for ALB)
  - Ability to handle volatile workloads.

6. Role vs Policies
  - Create the "policies" after that gives the access to the s3 bucket
  - Need to attached to a "role"
  - IAM role is a set of permissions that grant access to the actions & resources in aws.
  
7. If EC2 disk space full, what actions will take to mitigate ?
  - First need to check root volume / application EBS volume. 
  - If issue with root then need to check /var/log
  - application /tmp
  - need to take the snapshot increase disk space.

============: AWS EC2 Interview Questions and Answers for Experienced :================
8. What are the type of virtualization do we have on AWS Platform?
  - hvm (hardware virtual machine)
  - paravirtualisation 

9. What are the type of root device?
  - EBS
  - Instance store

10. What are the type of EBS Volumes and the use cases?
  - refer to above note.

11. What is difference between t2.micro and t3.micro?
  - t2/t3 --> family type
  - .micro/small/nano --> define the size like ram,cpu etc.

12. Why do we attach IAM role with EC2 machine while creating it?
  - User can get least priveledge to perform the action. 

13. What is Advantage of IAM role with EC2?
  - 

14. What are the usages of TAGs with EC2 / AWS Resources?
  - we can know those instance use for which purpose. accordingly we can perform / reach out to the team. 

15. What is T2/T3 unlimited option?
  - we have cpu credit usage & cpu credit balance.  

16. What are the type of Hypervisors in AWS?
  - xen (t2.micro) 
  - nitro (t3.micro) --> faster & cheaper.

17. How can we recover lost ec2 ssh key?
  - No way to recover
  - we can mount the root volume

18. How to check shared AMIs?
  - go to AMI
  - Three options (owned by me, public images, private images)

=====================================================================================================
Ref: https://www.youtube.com/watch?v=SorYr_8oi18

1. 
