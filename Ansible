Ref:
- https://www.youtube.com/watch?v=Z6YGH0HVejE
- https://www.youtube.com/watch?v=j5PgN0J3d7M&t=7s : Interview Qus

---------------------
Set-up
 - Password less authentication 
 - ssh-keygen in master and generate the key pairs.
 - cd ~/.ssh/ -> copy "id_rsa.pub" paste it under "authorized_keys" in the target server.
 - ssh <public_ip>

---------------------:Host Inventory file:-------------
 - Here we add node details like ip, m/c name etc
 - we can group them as well by using []. 

-------------------- :Ansible Adhoc commands: ----------
For one / two tasks and playbooks for multiple tasks. 
 - ansible all -m setup -a "filter=ansile_distribution"
 - ansile all -m command -a "uptime"
 - ansible all -i hosts -m shell -a "df"
 - ansible all -m package -a "name=tree state=present"
 - ansible all -i hosts -l ubnt -m shell -a "ls /"
 - ansible all -i hosts -l cent -m raw -a "touch /tmp/demo.txt"
 - ansible all -m ping
 - ansible all -m file -a "name=/tmp/demo.txt state=touch"
 - ansible all -m file -a "name=/tmp/mydir state=directory"
 - ansible all -m user -a "name=john state=present"
 - ansible all -m group -a "name=devops state=present"
 - ansible all -m file -a "name=/tmp/demo.txt mode=0777 owner=john group=devops"
 - ansible all -i hosts -l ubnt -m apt -a "name=git-core state=present"
 - ansible all -i hosts -l ubnt -m apt -a "name=git-core state=present"
 - ansible all -i hosts -l cent -m yum -a "name=git-core state=present"
 - ansible all -i hosts -l ubnt -m apt -a "name=apache2 state=latest"
 - ansible all -i hosts -l ubnt -m apt -a "name=apache2 state=latest"
 - ansible all -i hosts -l cent -m yum -a "name=httpd state=latest"
 - ansible all -i hosts -l ubnt -m service -a "name=apache2 state=startd"
 - ansible all -i hosts -l ubnt -m service -a "name=apache2 state=started"
 - ansible all -i hosts -l cent -m systemd -a "name=httpd state=started"
 - ansible all -m cron -a "name='myjob' minute='30' hour='5' job='ls -l > /tmp/files.log'"

 -------------------------: Ansible Playbooks :-----------------
Ex: 1
--- [three hifens denotes its a yaml file]
---
- hosts: all
  become: root 
  gather_facts: true
  tasks:
    - name: to copy a file
      copy: src=demo.txt  dest=/tmp/demo.txt
    - name: to display msg
      debug:
        msg: file copied!
ansible-playbook playbooks/pb1.yml --syntax-check
ansible-playbook playbooks/pb1.yml
ansible-playbook -vvv playbooks/pb1.yml , (-v means verbose option)

Ex: 02
 ---
 - hosts: ubnt
  remote_user: root
  gather_facts: true
  tasks:
    - name: to updat repo
      raw: apt-get update
    - name: to install apache
      apt: name=nginx state=present
    - name: to deploy a file
      copy: src=index.html  dest=/var/www/html/index.html
    - name: to start service
      service: name=nginx state=started

Ex: 03,
---
- hosts: all
  remote_user: root
  gather_facts: true
  vars:
    - pack1: java
    - pack2: tomcat
  tasks:
    - name: to install {{pack1}}
      yum: name={{pack1}} update_cache=yes state=present

    - name: to install {{pack2}}
      package: name={{pack2}} state=present
      notify:
        - start tomcat

    - name: to deploy a file
      copy: src=sample.war  dest=/var/lib/tomcat/webapps/sample.war

  handlers:
    - name: start tomcat
      systemd: name=tomcat state=started

========================: Interview Qus :=========================================================================
1. How Ansible helped in your org?
 - Configure Prometheus & Grafana
 - added new m/c under host-inventory file.
 - reduce the time.
 - increase the productivity.

2. Dynamic Inventory?
 
3. Ansible Tower?
 - GUI
 - Enterprise model which comes with some additional features 
 - get the support from redhat. 

4. Handlers? 
 - installing nginx, httpd etc
 - so that case we use notify and notify would call and accordingly it will execute the task. 

5. Does Ansible support parallel tasks?
 - yes
 - if 5 tasks, then it'll perform task-1 all of the hosts, then move to task-2.
 - 

6. Ansible use to connect to windows & Linux?
 - bin rm & ssh

7. 